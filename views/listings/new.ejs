<% layout('/layout/boilerplate') -%>
<div class="row">
<div class="col-8 offset-2">
<h2 class="mt-4">Create a New Listing</h2>

<form method="POST" action="/listings" novalidate class="needs-validation" enctype="multipart/form-data">

    <div class="mb-3">
        <label class="form-label">Title</label>
        <input name="listing[title]" type="text" class="form-control" 
        placeholder="enter title"
        required>
        <div class="invalid-feedback">Title should be valid</div>
    </div>

    <div class="mb-3">
        <label class="form-label">Description</label>
        <textarea name="listing[description]" class="form-control" placeholder="enter description"
        required
        ></textarea>
        <div class="invalid-feedback">Description should be valid</div>
    </div>


     <div class="mb-3">
        <label class="form-label">Upload Images</label>
        <!-- IMPORTANT FOR YOUR IMAGE OBJECT SCHEMA -->
        <input name="listing[image]" type="file" class="form-control" required>
    </div>


<div class="row ">
    <div class="mb-3 col-4">
        <label class="form-label">Price</label>
        <input name="listing[price]" type="number" class="form-control" 
        placeholder="enter price"
        required
        >
        <div class="invalid-feedback">Price should be valid</div>
    </div>
 <div class="mb-3 col-4">
        <label class="form-label">Country</label>
        <input name="listing[country]" 
        type="text" 
        class="form-control" 
        placeholder="enter country"
        required
        >
<div class="invalid-feedback">Country should be valid</div>
    </div>
    </div>


    <div class="mb-3">
        <label class="form-label">Location</label>
        <input name="listing[location]" type="text" class="form-control" placeholder="enter location"
        required
        >
        <div class="invalid-feedback">Location should be valid</div>
    </div>

  <div class="mb-3">
  <label class="form-label fw-semibold">Categories</label>

  <div class="row">
    <% const categories = [
      "Trending","Rooms","Farms","Iconic Cities",
      "Pools","Beach","Pet-friendly","Arctic",
      "Sunrise","Horse Riding"
    ]; %>

    <% categories.forEach((cat, index) => { 
      const id = "cat-" + cat.replace(/\s+/g,'-').toLowerCase();
    %>
      <div class="col-4 form-check">
        <input
          class="form-check-input"
          type="checkbox"
          name="listing[category][]"
          value="<%= cat %>"
          id="<%= id %>"
          <%= index === 0 ? "required" : "" %>
        >
        <label class="form-check-label" for="<%= id %>">
          <%= cat %>
        </label>
      </div>
    <% }) %>
  </div>

  <div class="invalid-feedback d-block">
    Select at least one category
  </div>
</div>




    <button class="btn btn-dark add-btn">Add</button>
    <br><br>
</form>
</div>
</div>
